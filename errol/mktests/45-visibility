#!/bin/sh
# Generated by BetterMake
# md5sum: dfe05bd1be488e2446a4b84ff043f816

##
# Symbol Visibility Test
#   Tests compiler support for the symbol visibility flag '-fvisibility'.
# Variables
#   visibility
#     If supported, set to 'yes', otherwise it is set to a blank string.
#.

echo -n "checking -fvisiblity... "
echo "int func() { return 0; }" > mktests/tmp.c
test -f mktests/tmp.c || echo error || return 1

$cc -c mktests/tmp.c -Wall -Werror -shared -fvisibility=internal -o mktests/tmp.out >> config.log 2>&1
if [ $? -eq 0 ] && [ -f mktests/tmp.out ] ; then
	echo yes ; visibility=yes
else
	echo no ; visibility=""
fi
